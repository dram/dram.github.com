<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" href="/images/favicon.png"><title>OFBiz中的页面重定向机制</title></head><body><header><span id="site-name"><a href="/">dram.me</a></span><nav><ul><li><a href="/blog/about.html">About</a></li><li><a href="/logo/">LOGO</a></li></ul></nav></header><article><h1 class="topictitle1" id="ariaid-title1">OFBiz中的页面重定向机制</h1><time>26 Jun 2021</time><div><p>OFBiz有一个有趣的机制，在访问特定页面后，会将该页面设置为HOME页，而其他页面的某些操作，会指定在成功后跳转到HOME页。总体感觉这个机制是容易困扰用户的，因为用户无法事先知道哪些页面在访问后会被设定为HOME。</p><p>这个HOME信息被存放在session的<code>HOME_VIEW_NAME</code>变量中。</p><p>以下举一个例子说明这一机制。</p><p>在<span class="filepath">workeffort/WEB-INF/controller.xml</span>的<code>updateWorkEffort</code>定义中，<code>response</code>的类型被定义为<code>view-home</code>。（这里有一个细节，为什么已经定义了<code>view-home</code>，还需要指定<code>value</code>是<code>EditWorkEffort</code>？）</p><p>而同样在<span class="filepath">workeffort/WEB-INF/controller.xml</span>的<code>calendar</code>的定义中，启用了<code>save-home-view</code>。</p><p>两者结合，就会产生这样的交互效果：用户在点击日历后，再去执行工作记录更新等操作，在成功提交后会重定向到日历页。</p></div></article><footer><p>Copyright © 2021 Xin Wang</p></footer></body></html>