<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" href="/images/favicon.png"><title>搭建iDempiere开发环境</title></head><body><header><span id="site-name"><a href="/">dram.me</a></span><nav><ul><li><a href="/blog/about.html">About</a></li><li><a href="/logo/">LOGO</a></li></ul></nav></header><article><h1 class="topictitle1" id="ariaid-title1">搭建iDempiere开发环境</h1><time>31 Jul 2021</time><div><p>本文描述iDempiere基于Eclipse的开发环境搭建流程，如果只是试用，可以参考<a href="/blog/2021/07/18/idempiere-installation-and-configuration.html">这里</a>。</p><ol><li><p>自https://www.microsoft.com/openjdk下载安装OpenJDK 11；</p></li><li><p>自https://www.eclipse.org/downloads/packages下载解压Eclipse 2021‑06 R（IDE for Enterprise Java and Web Developers）；</p></li><li><p>打开Eclipse，指定工作环境目录，如：C:/workspace/idempiere；</p></li><li><p>在Eclipse欢迎页面，点击Checkout projects from Git，选择Clone URI，指定URI为https://github.com/idempiere/idempiere.git，点击Next，目标目录指定为：C:/git/idempiere，再点击Next，完成仓库克隆；</p></li><li><p>点击Eclipse菜单Project &gt; Build Automatically，禁用自动编译；</p></li><li><p>点击Eclipse菜单Window &gt; Preferences，选择General &gt; Workspace，设置Text file encoding为UTF-8，New text file line delimiter为Unix；</p></li><li><p>点击Eclipse菜单Window &gt; Preferences，选择Java &gt; Compiler，设置Compiler compliance level为11；</p></li><li><p>点击Eclipse菜单Window &gt; Preferences，选择Java &gt; Installed JREs，点击Add...，Standard VM，选择OpenJDK路径，如：C:/Program Files/Microsoft/jdk-11.0.11.9-hotspot，完成添加后在列表中选中该项；</p></li><li><p>点击Eclipse菜单File &gt; Import...，再选择Maven &gt; Existing Maven Projects，点击Next，选择Root Directory，如：C:/git/idempiere，导入所有项目；</p></li><li><p>在Project Explorer中，选择打开org.idempiere.p2.targetplatform &gt; org.idempiere.p2.targetplatform.target，点击Set as Active Target Platform，这一步需要较长时间等待（注：过程中会提示安装未经验证的插件，暂不确定原因，需要点击继续安装，非则无法成功安装）；</p></li><li><p>在Project Explorer中，右键点击根项目org.idempiere.main，点击菜单项 Run As &gt; 2 Maven build...，在Goals中输入verify，再点击Run，这一步需要较长时间等待；</p></li><li><p>在Project Explorer中，右键点击根项目org.idempiere.main，点击菜单项 Maven &gt; Update Project...。</p></li><li><p>搭建数据库，本文选择在WSL环境中搭建，PostgreSQL服务的安装过程从略，安装完成后，执行以下命令：</p><pre class="screen">% psql postgres postgres
# create role adempiere with login password 'adempiere' ;
# create database idempiere with owner adempiere ;
% cd /mnt/c/git/idempiere
% unzip -p org.adempiere.server-feature/data/seed/Adempiere_pg.jar Adempiere_pg.dmp | psql -d idempiere -U adempiere</pre></li><li><p>点击Eclipse菜单Run &gt; Run Configurations...，选择Eclipse Application &gt; install.app，点击Run，勾选DB Already Exists，点击测试并保存；</p></li><li><p>在WSL环境中，执行以下命令，更新数据库：</p><pre class="screen">% cd /mnt/c/git/idempiere
% bash RUN_SyncDBDev.sh</pre></li><li><p>点击Eclipse菜单Run &gt; Run Configurations...，选择Eclipse Application &gt; server.product，点击Run，启动服务。</p></li><li><p>如果需要运行Swing客户端，可以导入idempiere-swing-client仓库，再执行Eclipse Application &gt; swingclient.project，追加以下参数：</p><pre class="screen">-DPropertyFile=${project_loc:org.idempiere.main}/idempiere.properties
-DIDEMPIERE_HOME=${project_loc:org.idempiere.main}
-Dsun.java2d.uiScale=1.0
-Dswing.useSystemFontSettings=false</pre></li></ol><div class="section"><h2 class="sectiontitle">其他</h2><p>iDempiere的部分依赖包需要从sourceforge网站下载，由于下载过程中，sourceforge会重定向到镜像站，可能存在网络不稳定的情况，可以通过更改org.idempiere.p2.targetplatform.target和org.idempiere.p2.targetplatform.tpd中的相应URL解决，例如调整为：<code>https://cfhcable.dl.sourceforge.net/project/jasperstudio/updatesite/6.17.0/</code>。</p></div><div class="section"><h2 class="sectiontitle">更新</h2><ul><li><p>2021-08-21</p><ol><li>添加Swing客户端启动说明；</li></ol></li><li><p>2021-09-05</p><ol><li>说明sourceforge网络不稳定的解决方案；</li></ol></li></ul></div></div></article><footer><p>Copyright © 2021 Xin Wang</p></footer></body></html>