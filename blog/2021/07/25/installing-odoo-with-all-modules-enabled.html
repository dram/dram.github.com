<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" href="/images/favicon.png"><title>Odoo初始化全量安装（启用全部模块）</title></head><body><header><span id="site-name"><a href="/">dram.me</a></span><nav><ul><li><a href="/blog/about.html">About</a></li><li><a href="/logo/">LOGO</a></li></ul></nav></header><article><h1 class="topictitle1" id="ariaid-title1">Odoo初始化全量安装（启用全部模块）</h1><time>25 Jul 2021</time><div><p>odoo命令中包含有<span class="cmdname">-i all</span>参数，可以初始化安装全部模块，但在使用中并没有达到预期的效果，例如以下命令：</p><pre class="screen">odoo --database=odoo-all-14.4 --init=all --without-demo=all --no-http --logfile=/dev/stdout</pre><p>在分析<a href="https://github.com/odoo/runbot" target="_blank">runbot</a>的代码后，可以大概勾勒出启用全部模块的机制，就是遍历addons目录中的所有子目录，筛选其中包含manifest文件的目录，例如以下命令：</p><pre class="screen">odoo --database=odoo-all-14.4 --init=$(python3 -c 'import glob; import os; print(",".join(sorted(os.path.basename(os.path.dirname(path)) for path in glob.glob("/usr/lib/python3/dist-packages/odoo/addons/*/__manifest__.py"))))') --stop-after-init --no-http --max-cron-threads=0 --logfile=/dev/stdout</pre><p>另外，也可以直接参考https://runbot.odoo.com/中的日志文件。</p></div></article><footer><p>Copyright © 2021 Xin Wang</p></footer></body></html>