<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" href="/images/favicon.png"><title>metasfresh中的服务管理</title></head><body><header><span id="site-name"><a href="/">dram.me</a></span><nav><ul><li><a href="/blog/about.html">About</a></li><li><a href="/logo/">LOGO</a></li></ul></nav></header><article><h1 class="topictitle1" id="ariaid-title1">metasfresh中的服务管理</h1><time>08 Aug 2021</time><div><p>metasfresh基于Spring Boot搭建，所以在服务管理上多有使用<code>@Service</code>，不过metasfresh另外还有自带的一套服务管理<code>de.metas.util.Services</code>，不清楚为何需要两套系统，简单看了下提交历史，自带的Services应该继承自ADempiere，而Spring Boot是后续引入的。</p><p><code>Services</code>的主要接口是<code>registerService</code>注册服务，以及<code>get</code>获取服务。在获取服务时，如果未注册，Services会尝试实例化，这只限于构造函数不需要参数的服务。在Spring中，则是通过构造函数注入实现各服务之间的依赖关系，从而实现带参数服务的实例化。</p><p>另外，在<code>de.metas.StartupListener</code>中，通过<code>Services.setExternalServiceImplProvider</code>实现了将Services的部分功能代理到Spring。</p></div></article><footer><p>Copyright © 2021 Xin Wang</p></footer></body></html>