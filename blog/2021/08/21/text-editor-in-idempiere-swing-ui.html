<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/css/main.css"><link rel="shortcut icon" href="/images/favicon.png"><title>iDempiere Swing客户端的文本编辑器</title></head><body><header><span id="site-name"><a href="/">dram.me</a></span><nav><ul><li><a href="/blog/about.html">About</a></li><li><a href="/logo/">LOGO</a></li></ul></nav></header><article><h1 class="topictitle1" id="ariaid-title1">iDempiere Swing客户端的文本编辑器</h1><time>21 Aug 2021</time><div><p>iDempiere表格页中的编辑器，在<code>VCellEditor.createEditor()</code>实例化，最终实现是<code>VString</code>类。</p><p>同时，也是在<code>VCellEditor</code>中绑定了编辑器<code>vetoableChange</code>事件的监听。</p><p><code>CTable.tableChanged()</code>在切换单元格时会被触发，其由<code>GridTable.fireTableCellUpdated()</code>触发，再之前事件触发路径是<code>VCellEditor.stopCellEditing()</code> - <code>VCellEditor.fireEditingStopped()</code> - <code>VTable.editingStopped()</code> - <code>VTable.setValueAt()</code> - <code>GridTable.setValueAt()</code>。</p><p>另外，在Swing UI中，如果字段长度大于显示长度，输入框的右键菜单中包含有“Editor”菜单项，点击可打开富文本编辑器。在iDempiere中，菜单项的添加在<code>org.compiere.grid.ed.VString.VString</code>构造函数中处理，富文本编辑器的启动在<code>actionPerformed()</code>中实现。在metasfresh中，相关代码主要在<code>org.compiere.grid.ed.menu.TextEditorContextMenuAction.run()</code>中实现。</p><p>另外，<code>VText</code>用于实现多行文本编辑框。</p></div></article><footer><p>Copyright © 2021 Xin Wang</p></footer></body></html>